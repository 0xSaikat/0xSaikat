name: Daily Cybersecurity Quote Update
on:
  schedule:
    - cron: '0 0 * * *'  # Runs daily at midnight UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  quote-updater:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          ref: main  # Explicitly specify your branch name

      - name: Generate Random Quote
        id: generate-quote
        run: |
          QUOTES=(
            "ðŸ”“ The only secure system is one that's powered off, encased in concrete, and guarded."
            "ðŸ›¡ï¸ Security: Expensive until you need it desperately."
            "ðŸ’» Hacking: The art of finding truth in systems."
            "ðŸŽ¯ If you think technology can solve security problems, you don't understand either."
            "ðŸ”‘ Passwords are like jokes: longer and more obscure = better."
          )
          SELECTED_QUOTE="${QUOTES[$RANDOM % ${#QUOTES[@]}]}"
          echo "QUOTE=${SELECTED_QUOTE}" >> $GITHUB_OUTPUT
          echo "Generated quote: ${SELECTED_QUOTE}"  # Debug output

      - name: Update README
        run: |
          # Clean existing quote content
          sed -i '/<p id="random-quote"/,/<\/p>/c\
    <p id="random-quote" style="font-size: 18px; font-weight: bold; color: #00FF00; font-family: '\''Courier New'\'', monospace; margin-bottom: 20px;">\
    '"${{ steps.generate-quote.outputs.QUOTE }}"'\
    </p>' README.md

          echo "README after update:"
          cat README.md  # Debug output

      - name: Commit Changes
        run: |
          git config --global user.name "Quote Bot"
          git config --global user.email "quote-bot@users.noreply.github.com"
          git add README.md
          git commit -m "ðŸ“Œ Daily quote update: ${{ steps.generate-quote.outputs.QUOTE }}" || echo "No changes to commit"
          git push
